<Page xmlns="http://www.nativescript.org/tns.xsd" navigatedTo="navigatedTo">
  <Page.optionsMenu>
    <MenuItem text="{{ strings.logout }}" tap="{{ logout }}" android.position="popup" />
  </Page.optionsMenu>
  <GridLayout rows="auto, *, auto">
    <SegmentedBar selectedBackgroundColor="#259B24" selectedIndex="{{ selectedDay }}" cssClass="segmentedBar">
      <SegmentedBar.items>
        <SegmentedBarItem title="Overdue" />
        <SegmentedBarItem title="Today" />
        <SegmentedBarItem title="Tomorrow" />
        <SegmentedBarItem title="Next" />
      </SegmentedBar.items>
    </SegmentedBar>
    <ListView items="{{ tasks }}" itemTap="listViewItemTap" row="1" cssClass="listView">
      <ListView.itemTemplate>
        <StackLayout orientation="horizontal" cssClass="listViewItem">
          <Image src="{{ task | getStatusImage }}" stretch="none" tap="completeTaskButtonTap" cssClass="listViewItemIcon"/>
          <StackLayout>
            <Label cssClass="listViewItemHeader">
              <Label.formattedText>
                <FormattedString>
                  <FormattedString.spans>
                    <Span text="{{ project.Name }}" fontAttributes="Bold, Italic" />
                  </FormattedString.spans>
                </FormattedString>
              </Label.formattedText>
            </Label>
            <Label text="{{ task.Name }}" cssClass="listViewItemLabel" textWrap="true" />
          </StackLayout>
        </StackLayout>
      </ListView.itemTemplate>
    </ListView>

    <AbsoluteLayout row="1" cssClass="fabContainer" >
      <Image src="res://fab_add" tap="{{ addTask }}" cssClass="fab" />
    </AbsoluteLayout>

    <ActivityIndicator rowSpan="3" busy="{{ isLoading }}" />
  </GridLayout>
</Page>